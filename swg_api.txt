openapi: 3.0.3
info:
  title: modulos-promocionales-api
  description: Microservicio de gestion de peticiones de Informacion e inyeccion de Datos
  version: 1.0.11
servers:
  - url: /rest/modulos-promocionales-api/v1.0/
tags:
  - name: Lugares
    description: Informacion de Provincias, Ciudades, Sectores y Zonas donde aplican los modulos.
  - name: Financiero
    description: Informacion de datos financieron como Modos de Pago, buro, y datos promocionales que aplican en los modulos.
  - name: Planes
    description: Informacion de datos sobre planes sobre productos de modulos.
  - name: Modulo Promocional
    description: Carga de Modulo Promocional
paths:
  /get/lugares/provincias:
    post:
      tags:
        - Lugares
      description: Consulta de Datos de Provincias segun sus parametros.
      operationId: get_provincias
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RequestGetProvincia'
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
        "400":
          description: BAD REQUEST
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResponseError'
  /get/lugares/ciudades:
    post:
      tags:
        - Lugares
      description: Consulta de Datos de Ciudades
      operationId: get_ciudades
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RequestGetCiudades'
      responses:
        "200":
          description: OK
        "400":
          description: BAD REQUEST
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResponseError'
  /get/lugares/sectores:
    post:
      tags:
        - Lugares
      description: Consulta de Datos de Sectores
      operationId: get_sectores
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RequestGetSectores'
      responses:
        "200":
          description: OK
        "400":
          description: BAD REQUEST
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResponseError'
  /get/planes/ofertas:
    post:
      tags:
        - Planes
      description: Consulta de Datos de Ofertas
      operationId: get_ofertas
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RequestGetOfertas'
      responses:
        "200":
          description: OK
        "400":
          description: BAD REQUEST
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResponseError'
  /get/planes/servicios:
    post:
      tags:
        - Planes
      description: Consulta de Datos de Servicios
      operationId: get_servicios
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RequestGetServicios'
      responses:
        "200":
          description: OK
        "400":
          description: BAD REQUEST
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResponseError'
  /get/planes/combos:
    post:
      tags:
        - Planes
      description: Consulta de Datos de Combos
      operationId: get_combos
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RequestGetCombos'
      responses:
        "200":
          description: OK
        "400":
          description: BAD REQUEST
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResponseError'
  /get/planes/planes:
    post:
      tags:
        - Planes
      description: Consulta de Datos de Planes
      operationId: get_planes
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RequestGetTPV'
      responses:
        "200":
          description: OK
        "400":
          description: BAD REQUEST
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResponseError'
  /get/finance/buro:
    post:
      tags:
        - Financiero
      description: Consulta de Buro
      operationId: get_buro
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RequestGetBuro'
      responses:
        "200":
          description: OK
        "400":
          description: BAD REQUEST
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResponseError'
  /get/finance/modos-pago:
    post:
      tags:
        - Financiero
      description: Consulta de Modos de Pago
      operationId: get_modospago
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RequestGetFormasPago'
      responses:
        "200":
          description: OK
        "400":
          description: BAD REQUEST
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResponseError'
  /get/finance/dias-gozados:
    post:
      tags:
        - Financiero
      description: Consulta de Dias Gozados
      operationId: get_diasgozados
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RequestGetDiasGozados'
      responses:
        "200":
          description: OK
        "400":
          description: BAD REQUEST
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResponseError'
  /get/finance/upgrade:
    post:
      tags:
        - Financiero
      description: Consulta de Datos Upgrade
      operationId: get_upgrade
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RequestGetUpgrade'
      responses:
        "200":
          description: OK
        "400":
          description: BAD REQUEST
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResponseError'
  /get/finance/precio-regular:
    post:
      tags:
        - Financiero
      description: Consulta de Precios de Productos
      operationId: get_precioregular
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RequestGetPrecioRegular'
      responses:
        "200":
          description: OK
        "400":
          description: BAD REQUEST
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResponseError'
  /post/modulo-promocional:
    post:
      tags:
        - Modulo Promocional
      description: Envio de Datos a Base de Datos
      operationId: post_modulopromocional
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ResquestPostDiccionarioDatos'
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResponseError'
        "400":
          description: BAD REQUEST
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResponseError'
components:
  schemas:
    RequestGetProvincia:
      required:
        - channel
        - type
      properties:
        channel:
          type: string
          example: web-modulos-promocionales
        type:
          type: string
          example: "ALL_PROVS"
        TARIFFPLANVARIANT:
          type: integer
          example: 200
          
    RequestGetCiudades:
      required:
        - channel
        - type    
      properties:
        channel:
          type: string
          example: web-modulos-promocionales
        type:
          type: string
          example: "ALL_PROVS"
        id_Provs:
          type: integer
          example: 12123
        TARIFFPLANVARIANT:
          type: integer
          example: 200
        PRODUCTOID:
          type: integer
          example: 200
          
    RequestGetSectores:
      required:
        - channel
        - type
      properties:
        channel:
          type: string
          example: web-modulos-promocionales
        type:
          type: string
          example: "ALL_SECTORS"      
        id_City:
          type: integer
          example: 12123
        id_Cities:
          type: array
          items:
            type: integer
          example: [12123, 45678, 78901]
        TARIFFPLANVARIANT:
          type: integer
          example: 200
        PRODUCTOID:
          type: integer
          example: 200
          
    RequestGetTPV:
      required:
        - channel
        - type
        - stype
      properties:
        channel:
          type: string
          example: web-modulos-promocionales
        type:
          type: string
          example: ALL_
        stype:
          type: string
          example: "AD_"
        SERVICIO:
          type: string
          example: "INTERNET"
        TIPO_SERVICIO:
          type: string
          example: "RESIDENCIAL"
          
    RequestGetServicios:
      required:
        - channel
        - type
        - stype
      properties:
        channel:
          type: string
          example: web-modulos-promocionales
        type:
          type: string
          example: "ALL_"
        stype:
          type: string
          example: "AD_"
          
    RequestGetOfertas:
      required:
        - channel
        - type
        - stype
      properties:
        channel:
          type: string
          example: web-modulos-promocionales
        type:
          type: string
          example: "ALL_"
        stype:
          type: string
          example: "AD_"
          
    RequestGetCombos:
      required:
        - channel
        - type
        - stype
      properties:
        channel:
          type: string
          example: web-modulos-promocionales
        type:
          type: string
          example: "ALL_"
        stype:
          type: string
          example: "AD_"
        _V1:
          type: string
          example: "Puede ser Numero o Palabra pero no 2 a la vez"
          
    RequestGetBuro:
      required:
        - channel
        - type
      properties:
        channel:
          type: string
          example: web-modulos-promocionales
        type:
          type: string
          example: "ALL_"
          
    RequestGetFormasPago:
      required:
        - channel
        - type
      properties:
        channel:
          type: string
          example: web-modulos-promocionales
        type:
          type: string
          example: "ALL_"
          
    RequestGetDiasGozados:
      required:
        - channel
        - type
      properties:
        channel:
          type: string
          example: web-modulos-promocionales
        type:
          type: string
          example: "ALL_"
          
    RequestGetPrecioRegular:
      required:
        - channel
        - type
        - TARIFFPLANVARIANT
        - id_Prod
      properties:
        channel:
          type: string
          example: web-modulos-promocionales
        type:
          type: string
          example: " ALL_"
        TARIFFPLANVARIANT:
          type: integer
          example: 128213
        id_Prod:
          type: integer
          example: 128213
          
    RequestGetUpgrade:
      required:
        - channel
        - type
        - TARIFFPLAN
        - TARIFFPLANVARIANT
      properties:
        channel:
          type: string
          example: web-modulos-promocionales
        type:
          type: string
          example: "ALL_"
        TARIFFPLAN:
          type: integer
          example: 08909
        TARIFFPLANVARIANT:
          type: integer
          example: 128213
    
    ResquestPostDiccionarioDatos:
      required:
        - channel
        - diccionarioDatos
      properties:
        channel:
          type: string
          example: web-modulos-promocionales
        diccionarioDatos:
          $ref: '#/components/schemas/RequestDiccionarioDatos'
          
    RequestDiccionarioDatos:
      required:
        - Id Registro
        - Nombre Promocion
        - Fecha Inicio Promocion
        - Fecha Finalizacion Promocion
        - Servicio
        - Plan_Id
        - Variant_Id
        - Producto_Id
        - Dias Gozado
        - Canal
        - Precio Promocional
        - Precio Referencial
        - Mes Inicio Promocion
        - Mes Fin Promocion
        - Ciudades
        - Sectores
        - Buro
        - Formas de Pago
        - Fecha Generacion Registro
      properties:
        Id Registro:
          type: integer
          example: 090
        Nombre Promocion:
          type: string
          example: "Prueba de Modulos"
        Fecha Inicio Promocion:
          type: string
          format: date
          example: "2024-08-08"
        Fecha Finalizacion Promocion:
          type: string
          format: date
          example: 2024-08-08
        Servicio:
          type: string
          example: INTERNET
        Plan_Id:
          type: integer
          example: 123322
        Variant_Id:
          type: integer
          example: 123322
        Producto_Id:
          type: integer
          example: 123322
        Dias Gozados:      
          type: string
          enum:
          - Yes
          - No
          example: YES
        Canal:
          type: integer
          example: 12
        Precio Promocional:
          type: number
          format: float
          example: 99.99
        Precio Referencial:
          type: number
          format: float
          example: 99.99
        Mes Inicio Promocion:
          type: integer
          example: 24
        Mes Fin Promocion:
          type: string
          example: "0 - 24 o SIEMPRE"
        UPGRADE:
          allOf:
            - $ref: '#/components/schemas/Upgrade'
        Ciudades:
          type: array
          items:
            type: integer
          example: 
            - 96006
            - 96000
        Sectores:
          oneOf:
          - type: array
            items:
              type: integer
            example:
              - 1
              - 2
              - 3
          - type: array
            items:
              type: string
            example:
            - "TODOS"
        Buro:
          type: array
          items:
            type: integer
          example: 
            - 96006
            - 96000
        Formas de Pago:
          type: array
          items:
            type: integer
          example: 
            - 96006
            - 96000
        Fecha Generacion Registro:
          type: string
          format: date-time
          example: "2024-08-08 11:10:18"
        STREAMING:
          allOf:
            - $ref: '#/components/schemas/STREAMING'
        TELEFONIA:
          allOf:
            - $ref: '#/components/schemas/TELEFONIA'
        TELEVISION:
          allOf:
            - $ref: '#/components/schemas/TELEVISION'
        ROUTER:
          allOf:
            - $ref: '#/components/schemas/ROUTER'
        
    Upgrade:
      required:
        - UPGRADE
        - Mes Inicio UPGRADE
        - Mes Fin UPGRADE
      properties:
        UPGRADE:
          type: integer
          example: 1000582
        Mes Inicio UPGRADE:
          type: integer
          example: 0
        Mes Fin UPGRADE:
          type: string
          example: "0 - 24 o siempre"
          
    STREAMING:
      type: object
      additionalProperties:
        type: object
        required:
          - Paquete
          - Producto Adicional
          - Precio Referencial
          - Precio Promocional
          - Mes Inicio
          - Mes Fin
        properties:
          Paquete:
            type: integer
            example: 1000569
          Producto Adicional:
            type: string
            example: "STREAMING"
          Precio Referencial:
            type: number
            format: float
            example: 0
          Precio Promocional:
            type: number
            format: float
            example: 0
          Mes Inicio:
            type: integer
            example: 0
          Mes Fin:
            type: string
            example: "SIEMPRE"
            
    TELEFONIA:
      required:
        - Plan
      properties:
        Plan:
          type: integer
          example: 1000569
      allOf:
        - $ref: '#/components/schemas/BodyProductoAdicional'
          
    TELEVISION:
      required:
        - Plan
      properties:
        Plan:
          type: integer
          example: 1000569
      allOf:
        - $ref: '#/components/schemas/BodyProductoAdicional'
          
    ROUTER:
      required:
        - Modelo
      properties:
        Modelo:
          type: integer
          example: 1000569
      allOf:
        - $ref: '#/components/schemas/BodyProductoAdicional'
        
    BodyProductoAdicional:
      required:
        - Producto Adicional
        - Precio Referencial
        - Precio Promocional
        - Mes Inicio
        - Mes Fin
        - Cantidad
      properties:
        Producto Adicional:
          type: string
          example: "STREAMING"
        Cantidad:
          type: integer
          example: 5
        Precio Referencial:
          type: number
          format: float
          example: 0
        Precio Promocional:
          type: number
          format: float
          example: 0
        Mes Inicio:
          type: integer
          example: 0
        Mes Fin:
          type: string
          example: " 0 - 24 o SIEMPRE"
          
    ResponseError:
      type: object
      properties:
        errorCode:
          type: integer
          example: 0
        internalTransactionId:
          type: string
          example: 03c33780-88cf-46cf-ba22-925e4d5be471
        externalTransactionId:
          type: string
          example: 82fb166d-c273-4840-9008-c895cf9de255
        message:
          type: string
          example: OK
          
    ResponseGetProvincia_data:
    
    ResponseGetCiudad_data:
    
    ResponseGetSectores_Data:
    
    