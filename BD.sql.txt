CREATE TABLE YTBL_MODULOPROMO_PRIN(
    ID NUMBER PRIMARY KEY,
    IDREGISTRO VARCHAR2(200),
    FGENERACIONREGISTRO DATE,
    NOMBREPROMOCION VARCHAR2(200),
    FINICIOCONTRATACION DATE,
    FFINCONTRATACION DATE,
    FFINANTICIPADACONTRATACION DATE,
    ISVALID VARCHAR2(3),
    PRODUCTOID NUMBER,
    VARIANTID NUMBER,
    REDID NUMBER,
    CANALID NUMBER,
    BURO VARCHAR2(50),
    EXCEPCION VARCHAR2(200),
    FORMADEPAGO VARCHAR2(35),
    ENTIDADBANCARIA VARCHAR2(530),
    EMISORTARJETA VARCHAR2(530),
    CIUDADES VARCHAR2(1200),
    SECTORES CLOB,
    SUBSECTORES CLOB,
    MESINICIOPROMOCION NUMBER,
    MESFINPROMOCION VARCHAR2(7),
    FFINPROMOCION DATE,
    DIASGOZADOS VARCHAR2(3),
    PRECIOPROMOCIONAL NUMBER,
    PRECIOREFERENCIAL NUMBER,
    UPGRADE CLOB,
    FCADUCIDADANTICIPADAREGISTRO DATE
);

CREATE SEQUENCE YSEQ_MODPRIN_ID START WITH 1 INCREMENT BY 1 NOCACHE NOCYCLE;

CREATE OR REPLACE TRIGGER YTRG_MODPRIN_ID
BEFORE INSERT ON YTBL_MODULOPROMO_PRIN
FOR EACH ROW
BEGIN
    IF :NEW.ID IS NULL THEN
        SELECT YSEQ_MODPRIN_ID.NEXTVAL INTO :NEW.ID FROM dual;
    END IF;
END;
/


# ------------------------------------------------------------------------------------------------
CREATE TABLE YTBL_MODULOPROMO_ADIC(
    ID NUMBER PRIMARY KEY,
    IDREGISTRO VARCHAR2(200),
    PRODUCTO VARCHAR2(10),
    PLANPAQUETEMODELO NUMBER,
    CANTIDAD NUMBER,
    PRECIOREGULAR NUMBER,
    PRECIOPROMOCIONAL NUMBER,
    MESINICIAL NUMBER,
    MESFINAL VARCHAR2(7)
);

CREATE SEQUENCE YSEQ_MODADIC_ID START WITH 1 INCREMENT BY 1 NOCACHE NOCYCLE;

CREATE OR REPLACE TRIGGER YTRG_MODADIC_ID
BEFORE INSERT ON  YTBL_MODULOPROMO_ADIC
FOR EACH ROW
BEGIN
    IF :NEW.ID IS NULL THEN
        SELECT YSEQ_MODADIC_ID.NEXTVAL INTO :NEW.ID FROM dual;
    END IF;
END;
/
